<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">7 posts tagged with &quot;Features&quot; | drand</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.drand.love/img/league-members.avif"><meta data-rh="true" name="twitter:image" content="https://docs.drand.love/img/league-members.avif"><meta data-rh="true" property="og:url" content="https://docs.drand.love/blog/tags/features"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="7 posts tagged with &quot;Features&quot; | drand"><meta data-rh="true" name="description" content="begginer tag"><meta data-rh="true" property="og:description" content="begginer tag"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.drand.love/blog/tags/features"><link data-rh="true" rel="alternate" href="https://docs.drand.love/blog/tags/features" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.drand.love/blog/tags/features" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="drand RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="drand Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PH6HJ6ECV2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-PH6HJ6ECV2",{})</script><link rel="stylesheet" href="/assets/css/styles.7acb8680.css">
<script src="/assets/js/runtime~main.b361a10a.js" defer="defer"></script>
<script src="/assets/js/main.2cddedc9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/drand-logo.avif" alt="drand Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/drand-logo.avif" alt="drand Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">drand</b></a><a class="navbar__item navbar__link" href="/docs/home">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/drand/drand-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/drand-greetings">Greetings!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/create-a-notion-widget">Creating a Notion Widget to display the latest Public Randomness from drand!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/retro-on-the-drand-testnet">Retro on the drand testnet outage of Feb 21, 2024</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/quicknet-is-live-on-league-of-entrophy-mainnet">quicknet is live on League of Entropy mainnet</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/announcing-randamu">Announcing Randamu!</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>7 posts tagged with &quot;Features&quot;</h1><p>begginer tag</p><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/create-a-notion-widget">Creating a Notion Widget to display the latest Public Randomness from drand!</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-26T00:00:00.000Z">July 26, 2024</time> · <!-- -->9 min read</div></header><div class="markdown"><p>In this blog post, we’ll dive into creating a simple Notion widget that displays the latest public randomness from drand (for both the <code>default</code> and <code>quicknet</code> beacons from the League of Entropy network).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="an-overview-of-drand">An overview of drand<a href="#an-overview-of-drand" class="hash-link" aria-label="Direct link to An overview of drand" title="Direct link to An overview of drand">​</a></h2>
<p>Our earlier <a href="https://drand.love/blog/a-guide-on-how-to-use-drand" target="_blank" rel="noopener noreferrer">blog</a> post titled &quot;A Guide on How to Use drand&quot;, explains the importance of public randomness and how drand provides it using a threshold network. It offers a step-by-step tutorial on setting up and using drand&#x27;s randomness in applications, including fetching randomness with JavaScript, verifying it, and using it in real-life scenarios like coin flips and random selection. The guide emphasizes fairness and verifiability in applications requiring random numbers.</p>
<p>In a nutshell, drand uses a threshold network, where multiple parties collaborate to generate random numbers, ensuring no single entity can predict or bias the outcome. By leveraging hashed signatures without a complete secret key held by any party, drand achieves verifiable randomness. This system&#x27;s reliability and unpredictability make it ideal for projects with a dependency on secure and verifiable randomness.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-into-notion-widgets">Step into Notion Widgets<a href="#step-into-notion-widgets" class="hash-link" aria-label="Direct link to Step into Notion Widgets" title="Direct link to Step into Notion Widgets">​</a></h2>
<p>Notion widgets are customizable, embedded elements that can be added to Notion pages to enhance functionality and interactivity. These widgets can display real-time information, like clocks, weather updates, calendars, or external content such as videos, and integrate third-party services directly within Notion. They are typically created using code snippets or widget creation tools and then embedded in Notion using the embed block feature. This enhances productivity and information accessibility within Notion workspaces.</p>
<p>Let’s make a drand notion widget!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reactjs-component">ReactJS Component<a href="#reactjs-component" class="hash-link" aria-label="Direct link to ReactJS Component" title="Direct link to ReactJS Component">​</a></h2>
<p>The first step is to create a basic ReactJS application that can be embedded in any Notion page. To fetch the latest randomness beacon, the application will need to integrate drand JavaScript client. The client is publicly available <a href="https://github.com/drand/drand-client" target="_blank" rel="noopener noreferrer">https://github.com/drand/drand-client</a>.</p>
<p>Firstly, we will create a new React project and then install the <a href="https://www.npmjs.com/package/drand-client" target="_blank" rel="noopener noreferrer">drand client</a>. It is the same client used in the previous blog post. We will use it to interact with the drand randomness beacon networks (default network and quicknet) in our ReactJS code.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install drand-client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the drand client is installed, we’re ready to start implementing our simple ReactJS application! The application will allow users to select their desired network (i.e., default or quicknet) from a dropdown menu and display the latest randomness after each round, the round number and a countdown to the next randomness generation round or ETA.</p>
<p>Appropriate API URLs for the mainnet default and quicknet networks can be found here: <a href="https://drand.love/docs/developers-guide" target="_blank" rel="noopener noreferrer">https://drand.love/docs/developers-guide</a></p>
<p>Let’s implement the reactjs component in our <code>App.js</code> file.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// React is the main library for building the UI components</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// useState, useEffect, useRef are React hooks for managing state, side effects, and mutable references, respectively.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useRef </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This library is used to interact with the drand (decentralized randomness) network.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> watch</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">FastestNodeClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;drand-client&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// A built-in JavaScript object for handling large integers, declared global to avoid ESLint issues.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* global BigInt */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The main functional component of the React app is the App() function. Let’s go ahead and start implementing it.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">App</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let’s add some state variables!</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// The latest randomness value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">latestRandomness</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setLatestRandomness</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The estimated time of arrival of the next randomness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">eta</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setETA</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The current round number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">round</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setRound</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The current selected network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setNetwork</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// A reference to the drand client instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> clientRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// A reference to an AbortController for managing asynchronous tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> abortControllerRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Following the state variables, we will implement the rest of the JavaScript fo the App component.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// useEffect runs the fetchLatestRandomness function when the component </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// mounts or when network changes.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">// fetchLatestRandomness async function to fetch randomness data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fetchLatestRandomness</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	      </span><span class="token comment" style="color:#999988;font-style:italic">// chainHash, publicKey are set based on the selected network.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> chainHash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> publicKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> updateInterval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">network </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;default&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          chainHash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;8990e7a9aaed2ffed73dbd7092123d6f289930540d7651336225dc172e51b2ce&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          publicKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;868f005eb8e6e4ca0a47c8a77ceaa5309a47978a7c71bc5cce96366b5d7a569937c529eeda66c7293784a9402801af31&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">network </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;quicknet&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          chainHash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;52db9ba70e0cc0f6eaf7803dd07447a1f5477735fd3f661792ba94600c84e971&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          publicKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;83cf0f2896adee7eb8b5f01fcad3912212c437e0073e911fb90022d3e760183c8c4b450b6a0a6c3ac6a5776a2d1064510d1fec758c921cc22b0e17e63aaf4bcb5ed66304de9cf809bd274ca73bab4af5a6e9c76a4bc09e76eae8991ef5ece45a&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          updateInterval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">disableBeaconVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">noCache</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">chainVerificationParams</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> chainHash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> publicKey </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// List of drand API endpoints</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> urls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;https://api.drand.sh&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;https://api2.drand.sh&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;https://api3.drand.sh&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;https://drand.cloudflare.com&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">network </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;quicknet&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          urls </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">url</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">url</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">chainHash</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// Create an instance of FastestNodeClient from drand-client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&#x27;Access-Control-Allow-Origin&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&#x27;Access-Control-Allow-Credentials&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FastestNodeClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">urls</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> headers </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          clientRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">abortControllerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          abortControllerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clientRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> abortController </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AbortController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        abortControllerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abortController</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// Asynchronously iterates over beacons (randomness values) </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// from the drand network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> beacon </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> abortController</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> currentTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Calculate and set the next ETA for randomness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nextETA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentTime </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> updateInterval</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Update state with new randomness data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">setETA</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextETA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toLocaleTimeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">setRound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">round</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">setLatestRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">0x</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">beacon</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">randomness</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Error fetching randomness:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchLatestRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clientRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">abortControllerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        abortControllerRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we will add a function called <code>handleNetworkChange</code> to update the <code>network</code> state when the user selects a different network.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleNetworkChange</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setNetwork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the next part of the react component implementation, customise the JSX to render the UI as preferred. In our example, the UI displays a dropdown menu for users to select the preferred network (i.e., default or quicknet), the ETA of the next randomness, the latest round and the latest randomness.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">App</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">header</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">App-header</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Latest Randomness from drand Beacon</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          Select Beacon Network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">select</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">network</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onChange</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleNetworkChange</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">marginLeft</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;10px&#x27;</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">option</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">default</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Default</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">option</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">option</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">quicknet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Quicknet</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">option</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">select</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        Next Randomness ETA: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">eta </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">eta</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        Latest Round: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">round </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">round</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        Latest Randomness: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">latestRandomness </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">latestRandomness</span><span class="token punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Loading...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">header</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once implemented, to start the React application, run</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will launch the application on <code>http://localhost:3000</code>. Open this URL in your browser to see the latest randomness from the drand beacon.</p>
<p>At this point, you&#x27;ve successfully created a React web page that fetches and displays randomness from the drand distributed randomness beacon! This setup can be a foundation for more complex applications requiring secure and verifiable randomness.</p>
<p>Before embedding our react app into a Notion page, we need to create a GitHub repository and push our code to the repository. This will allow us to use GitHub Pages to publish our React application to the web!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-pages-component">GitHub Pages Component<a href="#github-pages-component" class="hash-link" aria-label="Direct link to GitHub Pages Component" title="Direct link to GitHub Pages Component">​</a></h2>
<p>Now that you&#x27;ve built a React app to display randomness from the drand beacon, the next step is to deploy it on GitHub Pages. This will make your application accessible on the web.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-install-github-pages-package">Step 1: Install GitHub Pages Package<a href="#step-1-install-github-pages-package" class="hash-link" aria-label="Direct link to Step 1: Install GitHub Pages Package" title="Direct link to Step 1: Install GitHub Pages Package">​</a></h3>
<p>First, you need to install the <a href="https://www.npmjs.com/package/gh-pages" target="_blank" rel="noopener noreferrer"><code>gh-pages</code></a> package, which will help you deploy your app to GitHub Pages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-updatepackagejson">Step 2: Update <code>package.json</code><a href="#step-2-updatepackagejson" class="hash-link" aria-label="Direct link to step-2-updatepackagejson" title="Direct link to step-2-updatepackagejson">​</a></h3>
<p>Next, update your <code>package.json</code> file to include the homepage, predeploy, and deploy scripts.</p>
<ol>
<li><strong>Homepage</strong>: Add a <code>homepage</code> field to specify the URL where your app will be hosted. This is typically <code>https://&lt;username&gt;.github.io/&lt;repository-name&gt;</code>.</li>
<li><strong>Scripts</strong>: Add <code>predeploy</code> and <code>deploy</code> scripts.</li>
</ol>
<p>Here’s an example of how your <code>package.json</code> should look:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-notion-widget&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.1.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;private&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;homepage&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;https://yourusername.github.io/drand-notion-widget&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;dependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;drand-client&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^0.3.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;react&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^17.0.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;react-dom&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^17.0.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;react-scripts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4.0.3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;scripts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;start&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react-scripts start&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react-scripts build&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;predeploy&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;npm run build&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;deploy&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gh-pages -d build&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;devDependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;gh-pages&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^3.2.3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;username&gt;</code> with your GitHub username and <code>&lt;repository-name&gt;</code> with the name of your GitHub repository.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-initialize-git-repository">Step 3: Initialize Git Repository<a href="#step-3-initialize-git-repository" class="hash-link" aria-label="Direct link to Step 3: Initialize Git Repository" title="Direct link to Step 3: Initialize Git Repository">​</a></h3>
<p>Go to <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> and create a new repository with the same name you used in the <code>homepage</code> field of your <code>package.json</code>.</p>
<p>Follow the instructions provided by GitHub to link your local repository to the newly created GitHub repository.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-deploy-to-github-pages">Step 4: Deploy to GitHub Pages<a href="#step-4-deploy-to-github-pages" class="hash-link" aria-label="Direct link to Step 4: Deploy to GitHub Pages" title="Direct link to Step 4: Deploy to GitHub Pages">​</a></h3>
<p>Finally, run the deploy script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will create a production build of your React app and deploy it to the <code>gh-pages</code> branch of your GitHub repository. GitHub Pages will then serve your application from this branch.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-access-your-deployed-app">Step 5: Access Your Deployed App<a href="#step-5-access-your-deployed-app" class="hash-link" aria-label="Direct link to Step 5: Access Your Deployed App" title="Direct link to Step 5: Access Your Deployed App">​</a></h3>
<p>After deploying, your app should be accessible at <code>https://&lt;username&gt;.github.io/&lt;repository-name&gt;</code>.</p>
<p>By following these steps, you will have successfully deployed your React application to GitHub Pages, making it accessible to anyone with the URL. Happy deploying!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-together">Putting it Together<a href="#putting-it-together" class="hash-link" aria-label="Direct link to Putting it Together" title="Direct link to Putting it Together">​</a></h2>
<p>With the GitHub Pages URL ready (e.g., <code>https://yourusername.github.io/drand-notion-widget</code>), we can embed the drand reactjs application we deployed earlier in Notion.</p>
<p>Open the Notion page where you want to embed the URL, and embed it with the following steps:</p>
<ul>
<li>Click on the <code>+</code> button to add a new block or type <code>/embed</code> to bring up the embed block option.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Screenshot 2024-07-25 at 09.41.46.png" src="/assets/images/Screenshot_2024-07-25_at_09.41.46-51cb1fc8d8c0eebb3c7a68e585dd31fa.png" width="1020" height="886" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="Screenshot 2024-07-25 at 09.41.53.png" src="/assets/images/Screenshot_2024-07-25_at_09.41.53-afb823041d1fd56760db0810cf71e090.png" width="1588" height="612" class="img_ev3q"></p>
<ul>
<li>Select the <code>Embed</code> option from the list.</li>
<li>Paste your GitHub Pages URL into the embed block.</li>
<li>Press <code>Enter</code> or click on the <code>Embed link</code> button.</li>
</ul>
<p>Once the URL is embedded, you can resize the embed block by dragging the handles on the sides to fit your content appropriately. Notion might show a preview of your web app directly within the page, depending on how your app is configured and the type of content it displays.</p>
<p>An example drand widget embedded in a Notion page is shown below.</p>
<p><img decoding="async" loading="lazy" alt="Screenshot 2024-07-24 at 15.36.43.png" src="/assets/images/Screenshot_2024-07-24_at_15.36.43-66e623706df99cd2f9f9fbf602aff9e0.png" width="1922" height="748" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-recap">To Recap<a href="#to-recap" class="hash-link" aria-label="Direct link to To Recap" title="Direct link to To Recap">​</a></h3>
<p>We have successfully created a ReactJS application that displays the latest drand randomness beacon from both drand main network options (default and quicknet)!</p>
<p>We could do more with our Notion widget, e.g., styling it to our preference. To do this, simply modify the ReactJS code and redeploy it using <code>gh-pages</code> and the changes should be reflected at the same URL.</p>
<p>Happy coding!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="how to tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/how-to">How-to</a></li><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/begginer">Begginer</a></li><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/drand-explainer-for-begginers">drand Explainer for Beginners</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-01T00:00:00.000Z">June 1, 2023</time> · <!-- -->8 min read</div></header><div class="markdown"><p>Date Published: June 1, 2023
Tags: Beginner, Features, How-to</p>
<p><strong>drand is software for running a threshold network that generates publicly verifiable random numbers.</strong></p>
<p>Boy, that&#x27;s a mouthful.</p>
<p>To the uninitiated, a bunch of questions spring to mind: What on earth is a threshold network? How can random numbers be verified?! Surely they&#x27;re random? Why would I want my random numbers to be public?</p>
<p>Well, this blog post is the right place to uncover all the mysteries of the above statement. Let&#x27;s work backwards to build up a picture of what drand is and how it works.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-random-numbers">🔢 <strong>Random Numbers</strong><a href="#-random-numbers" class="hash-link" aria-label="Direct link to -random-numbers" title="Direct link to -random-numbers">​</a></h3>
<p>What constitutes a random number?</p>
<p>There are some fancy mathematical definitions, but stated simply: it&#x27;s a number that cannot be guessed at a rate better than chance. Suppose we choose a random number in the range 1 and 100 (including 100). If we asked 100 people to guess our number, on average only one of those people would guess the number correctly, even with a fully random selection process.</p>
<p>For cryptographic purposes, it&#x27;s often important that two people don&#x27;t select the same random number. For example, if two people used the same random number as their Bitcoin private key, they&#x27;d be sharing a wallet (and the wallet&#x27;s funds)!</p>
<p>While this is impossible to prevent entirely, cryptographic schemes use astronomically large number ranges (on the order of the number of atoms in the universe!) to ensure users get unique random numbers if they use proven selection methods.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-public-random-numbers-vs-private-random-numbers">🏙️ <strong>Public Random Numbers vs. Private Random Numbers</strong><a href="#️-public-random-numbers-vs-private-random-numbers" class="hash-link" aria-label="Direct link to ️-public-random-numbers-vs-private-random-numbers" title="Direct link to ️-public-random-numbers-vs-private-random-numbers">​</a></h3>
<p>Random numbers are used by everybody daily: connecting to a website over HTTPS, signing into our bank account, creating a user account, or purchasing an item online generates random identifiers. Most of these are <em>private</em> random numbers. If you shared random numbers associated with your bank account publicly, a malicious actor might be able to steal all your money.</p>
<p>Public random numbers are different. These are numbers we <em>want</em> everybody to see: think lottery numbers, the roll of a dice in a board game, selecting a business to be audited at random, or a coin flip for who takes the kick-off in a football match. This is exactly the type of randomness that drand provides—you definitely <em><strong>shouldn&#x27;t</strong></em> generate your Bitcoin private key using drand!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-verifiability">🔍 <strong>Verifiability</strong><a href="#-verifiability" class="hash-link" aria-label="Direct link to -verifiability" title="Direct link to -verifiability">​</a></h3>
<p>In examples of public randomness, humans have created procedures to ensure fairness: lottery numbers are drawn from fancy machines, dice are shared in board games to prevent cheating, and a referee picks the coin and flips it for a fair start in football.</p>
<p>However, these solutions are not truly <em>verifiable</em> and require trusting third parties (e.g., referees, dice &amp; lotto manufacturers, etc.) For generating random numbers fast and at scale, proving fairness is more challenging:</p>
<aside><p>❓</p><ul>
<li>If I trust a third party to generate the random number, how do I know they really chose it randomly?</li>
<li>If I trust a third party to run a random number generator I have audited, how do I know they&#x27;re running the code they say they are?</li>
<li>If I run some code to generate a random number, how do I know the code is statistically random and bug-free?</li>
</ul></aside>
<p>Human intuition can mislead us when it comes to randomness. If you were to look at the following binary numbers, which do you think is the most random?</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1111111111111111</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1001011010001001</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At first glance, the first two seem far too uniform to be random, but from a random selection of values from <code>0000000000000000</code> to <code>1111111111111111</code> (inclusive), they are all equally likely to occur!</p>
<p>How can we verify a randomly selected number was really random? It seems impossible. However, in drand, we exploit some cryptographic principles to make this possible. To fully understand it, we need a bit of background.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-digital-signatures">🔏 <strong>Digital Signatures</strong><a href="#-digital-signatures" class="hash-link" aria-label="Direct link to -digital-signatures" title="Direct link to -digital-signatures">​</a></h3>
<p>Digital signatures are similar to human signatures: we take some piece of data (like a contract or a letter) and append a message that uniquely identifies us and binds the signature to the data. Digital signatures differ from human signatures in several ways:</p>
<ul>
<li>Human signatures map to a single person; digital signatures map to a single private key (and a person could own multiple private keys).</li>
<li>Human signatures can be copied to another piece of data and still be valid; digital signatures are bound to a single piece of data, as the data is &#x27;included&#x27; in the signature in a mathematical sense.</li>
<li>Digital signatures are verifiable; we can run mathematical operations to verify that the person who created the signature had access to the data and the private key.</li>
</ul>
<aside><p>🔐 SIDE NOTE: private keys are like a password. They&#x27;re a huge (private) random number used in lieu of a password. They&#x27;re more secure than passwords due to their size, and users tend to store them somewhere rather than typing them by hand. In digital signature schemes, users also create a public key, a mathematical counterpart to the private key used to verify signatures. The public key can be shared publicly, and anyone can use it to validate signatures.</p></aside>
<p>So why are we talking about signatures?! This post is about randomness, and I even said we need randomness to generate a signature! Some properties of digital signatures are particularly interesting for randomness. Given some data, an attacker who has our public key but not our private key cannot predict a valid signature for it better than chance. To create a valid signature, they would have to create all possible signatures and verify them against the public key, which would take more computing power than exists in the world. Additionally, there&#x27;s exactly one valid signature for a given message and private key combination.</p>
<p>Another way to look at this: for users without access to a private key, a signature is indistinguishable from a random number and can be verified using the associated message and public key. If we had a way to create signatures with a private key that nobody could access, we would have publicly verifiable random numbers!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-threshold-cryptography">🕳️ <strong>Threshold Cryptography</strong><a href="#️-threshold-cryptography" class="hash-link" aria-label="Direct link to ️-threshold-cryptography" title="Direct link to ️-threshold-cryptography">​</a></h3>
<p>We&#x27;re close to explaining drand now. We&#x27;ve identified a way to create publicly verifiable numbers that are random under some assumptions but with a small problem: somebody needs to be a custodian for the private key used to create signatures. That amounts to trusting a third party, which we identified as an issue.</p>
<p>Enter threshold cryptography.</p>
<p>Threshold cryptography is like a business bank account: to reduce risk, transactions over a certain value require multiple parties to sign off. A threshold signature scheme is similar in that multiple parties must work together to create a valid signature.</p>
<p>Each party has their own private key and signs a message with it to create a &#x27;partial signature&#x27;. When enough partial signatures are created, they can be aggregated into a final valid signature. There&#x27;s no hierarchy between signers in a threshold scheme; any group of partial signatures will do. &#x27;Enough&#x27; is a parameter of the protocol called &#x27;threshold&#x27;. It&#x27;s also called a <code>t of n</code> signature scheme, where <code>t</code> (threshold) of <code>n</code> (total) parties must sign to create a valid signature.</p>
<p>Threshold signature schemes improve our security model compared to normal signature schemes. Instead of relying on a single trusted third party, we can trust a group of numerous, unrelated parties. The probability that <code>t</code> parties collude against us is lower than that of a single party. Another key piece of intuition is that the group shares a public key and private key, but <em>nobody</em> has access to the private key. This is created during a distributed key generation protocol at the foundation of a network.</p>
<p>The threshold signing scheme exploits mathematical properties of <a href="https://en.wikipedia.org/wiki/Pairing-based_cryptography" target="_blank" rel="noopener noreferrer"><strong>pairing-based cryptography</strong></a>, which is outside the scope of this post, to create signatures without ever needing the private key.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-tying-it-all-together">👟 <strong>Tying It All Together</strong><a href="#-tying-it-all-together" class="hash-link" aria-label="Direct link to -tying-it-all-together" title="Direct link to -tying-it-all-together">​</a></h3>
<p>We&#x27;ve covered a lot of ground, so let&#x27;s pull it back into the real world and show how drand works in practice.</p>
<p>At the foundation of a drand network, all parties generate their own private key and initiate a distributed key generation protocol to create a shared pair of private and public keys. Recall that <em>NO</em> single party has access to that private key. Every epoch (30 seconds for our default mainnet network), each party signs the same message (the epoch number) and sends their partial signature to the network. Upon receiving partial signatures from others, each party verifies their validity and, upon reaching a threshold number, aggregates them into a single valid group signature. This single group signature is effectively a random number that can be verified as having been created by the drand network. This randomness is released publicly for others to verify and use. Because drand epochs coincide with times on the clock, consumers can commit to certain future random values for use in their applications (e.g., &quot;I will draw the lottery using the random number generated at 12 PM tomorrow by the drand network, which will be epoch 123456&quot;).</p>
<p>This was a whistle-stop tour of how drand works, and some details were omitted for clarity.</p>
<p>If you&#x27;d like to dive deeper into the cryptography or operation of the drand network, check out our <a href="https://www.notion.so/2-0-CONCEPTS-Getting-Started-22d96de1674b448599227c37a1df5379?pvs=21" target="_blank" rel="noopener noreferrer"><strong>documentation</strong></a>, <a href="https://join.slack.com/t/drandworkspace/shared_invite/zt-19u4rf6if-bf7lxIvF2zYn4~TrBwfkiA" target="_blank" rel="noopener noreferrer"><strong>join our Slack workspace</strong></a>, or email us at: <a href="mailto:leagueofentropy@googlegroups.com" target="_blank" rel="noopener noreferrer">leagueofentropy@googlegroups.com</a>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="suggested-references-for-learning-more">Suggested References for Learning More:<a href="#suggested-references-for-learning-more" class="hash-link" aria-label="Direct link to Suggested References for Learning More:" title="Direct link to Suggested References for Learning More:">​</a></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Random_number" target="_blank" rel="noopener noreferrer">Random Number</a></li>
<li><a href="https://en.wikipedia.org/wiki/Elliptic_curve" target="_blank" rel="noopener noreferrer">Elliptic Curve</a></li>
<li><a href="https://en.wikipedia.org/wiki/Threshold_cryptography" target="_blank" rel="noopener noreferrer">Threshold Cryptography</a></li>
<li><a href="https://en.wikipedia.org/wiki/Digital_signature" target="_blank" rel="noopener noreferrer">Digital Signature</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/beginner">beginner</a></li><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li><li class="tag_QGVx"><a title="how to tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/how-to">How-to</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/timelock-encryption-is-now-supported-on-drand-mainnet">Timelock Encryption is now supported on drand mainnet</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-27T00:00:00.000Z">March 27, 2023</time> · <!-- -->11 min read</div></header><div class="markdown"><p>Date Published: March 27, 2023
Tags: Conferences and Events, Features, News</p>
<p>The drand team has been busy during the past year working on delivering an exciting new feature: <strong>Timelock Encryption</strong>. Timelock encryption enables you to encrypt a message that cannot be decrypted by anyone until a specified time in the future.</p>
<p>You might have heard about it from us already, since we were proud to present not just one, but <em>three</em> new open-source projects in August 2022, bringing a new very exciting feature called “timelock encryption” to our drand testnet!</p>
<p>Well, wait no more: we have now finally reached “General Availability” and our <em>audited</em> Timelock Encryption scheme is <strong>now compatible with the drand mainnet</strong>, thanks to our newly launched <code>fastnet</code> network which we’ll discuss quickly in this post as well.</p>
<p>Thanks to the team&#x27;s work, you can now use these features in many ways:</p>
<ul>
<li><a href="https://timevault.drand.love/" target="_blank" rel="noopener noreferrer"><strong>Our Timevault web-demo</strong></a> using <code>tlock-js</code> to perform timelock encryption easily in your browser, locally.</li>
<li><code>tlock</code>, a <a href="https://github.com/drand/tlock/" target="_blank" rel="noopener noreferrer"><strong>Go library doing Timelock encryption</strong></a> by relying on drand’s beacon signatures, along with <code>tle</code> - a CLI tool allowing you to use timelock encryption just like you would use <code>gpg</code> or <code>age</code>.</li>
<li><code>tlock-js</code>, a <a href="https://github.com/drand/tlock-js/" target="_blank" rel="noopener noreferrer"><strong>TS library doing the same</strong></a> for your browser apps.</li>
<li>Using the unchained drand beacons from our new <code>fastnet</code> network: <a href="https://api.drand.sh/dbd506d6ef76e5f386f41c651dcb808c5bcbd75471cc4eafa3f4df7ad4e4c493/public/latest" target="_blank" rel="noopener noreferrer">https://api.drand.sh/dbd506d6ef76e5f386f41c651dcb808c5bcbd75471cc4eafa3f4df7ad4e4c493/public/latest</a></li>
</ul>
<aside><p>⚠️ NOTE: <code>fastnet</code> has been deprecated in favor of <code>quicknet</code> since the original publication of this blog post.</p></aside>
<p>These were already <a href="https://www.youtube.com/watch?t=1652&amp;v=IW7sdSd2wOQ&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer"><strong>presented at DEF CON</strong></a> when we launched them on our testnet. Check the talk if you want more details about possible applications and the history behind Timelock Encryption.</p>
<p>More recently, we released a <a href="https://eprint.iacr.org/2023/189" target="_blank" rel="noopener noreferrer"><strong>pre-print paper</strong></a> explaining the details of our timelock scheme and we have a talk scheduled at Real World Crypto tomorrow, on March 29th, 2023 where we’ll explain more in depth how <strong>we transformed the League of Entropy</strong> and drand into the first practical <strong>Timelock Encryption service</strong> globally available with a <strong>100% uptime history</strong> over the past 3 years!</p>
<p>But for today let’s first see what this “Timelock Encryption” we’re talking about is.</p>
<p>P.S.: If this has piqued your interest and you’d rather watch a video about how this works, you can also find more technical explanations about what is coming next in this <a href="https://www.youtube.com/watch?v=Zgsv4LY0Sn0" target="_blank" rel="noopener noreferrer"><strong>Research Seminar</strong></a> that we gave in September!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="timelock-encryption"><strong>Timelock Encryption</strong><a href="#timelock-encryption" class="hash-link" aria-label="Direct link to timelock-encryption" title="Direct link to timelock-encryption">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drand-background"><strong>Drand background</strong><a href="#drand-background" class="hash-link" aria-label="Direct link to drand-background" title="Direct link to drand-background">​</a></h3>
<p>In order to understand how the system works, we need to first recall a few things about how drand functions…</p>
<p>First things first, let’s recall that <code>drand</code>, which stands for “<strong>distributed randomness</strong>” (and thus pronounced “dee-rand”), is our very own <a href="https://github.com/drand/drand" target="_blank" rel="noopener noreferrer"><strong>open-source software</strong></a> meant to create distributed randomness networks. These networks emit <strong>random “beacons” at a given frequency</strong> in a way that you never need to trust any single party in the network, and can <em><strong>verify</strong></em> that you actually have random values as long as you trust there is <strong>never a threshold number of malicious parties</strong> in the network, thus the security of the threshold BLS signature scheme holds.</p>
<p>To accomplish this drand relies on the threshold BLS signature scheme and its security proof that tells us BLS signatures are indistinguishable from random ones (in the group of all possible signatures). At each epoch, the members of a drand network work together to create an aggregated BLS signature on the message <strong>m = H(round)}</strong>. An important point here for what comes next is that the <strong>message is predictable</strong> according to the target round at a time T (in other words, there is a mapping between time and round numbers, since the network operates at a fixed frequency), when we’re using drand in the so-called unchained mode that <a href="/blog/tags/Multi-Frequency Support &amp; Timelock Encryption are  5c3651ad243541b698024016ecd24d26.md"><strong>we presented in a post last year</strong></a>.</p>
<p>You can learn more about drand and how it works under the hood in our documentation: <a href="https://www.notion.so/2-1-Concepts-Cryptography-6b6cea36929e4b1b8ed5b00ad8600081?pvs=21" target="_blank" rel="noopener noreferrer"><strong>Cryptography Page</strong></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-league-of-entropy"><strong>The League of Entropy</strong><a href="#the-league-of-entropy" class="hash-link" aria-label="Direct link to the-league-of-entropy" title="Direct link to the-league-of-entropy">​</a></h3>
<p>The League of Entropy is a consortium of organisations that decided, back in 2019, to start running a global drand network in order to provide free, unbiased, and verifiable public randomness for anyone to use. Since 2019, the League has been growing steadily, with new members joining it regularly and thus increasing the security and trust we can have in the League. You can read more about the League on Cloudflare’s website: <a href="https://www.cloudflare.com/leagueofentropy/" target="_blank" rel="noopener noreferrer"><strong>https://www.cloudflare.com/leagueofentropy/</strong></a></p>
<p>As of March 2023, the League is constituted of over 21 drand nodes operated by 18 organisations, with a threshold of over 50%, and you can follow our blog to see when new partners are joining the League: <a href="/blog/Blog 83785fc385334bd9b893ae3817f2944a.md">Blog</a></p>
<p>In case you were worried after reading our paper, know that whenever new members join the League, we conduct a so-called “resharing” of the League’s group secret key using verifiable secret sharing. This means that <strong>the public keys of the drand networks we run never change</strong> and it is not going to cause an incompatibility issue with our timelock scheme.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="our-timed-release-encryption-scheme"><strong>Our “timed release encryption” scheme</strong><a href="#our-timed-release-encryption-scheme" class="hash-link" aria-label="Direct link to our-timed-release-encryption-scheme" title="Direct link to our-timed-release-encryption-scheme">​</a></h3>
<p>Our timelock scheme, also sometimes called a “timed release encryption” (TRE) scheme, is a direct application of the <a href="https://crypto.stanford.edu/~dabo/papers/bfibe.pdf" target="_blank" rel="noopener noreferrer"><strong>Identity Based Encryption scheme</strong></a> (IBE) from Boneh et al. (section 4.2) to the threshold BLS signature setting of drand.</p>
<p>In IBE, participants are referred to via their <strong>identity</strong> which can be an email, a name, etc. and anyone can encrypt a message to any identity, even if the recipient is not “registered” with the system. This works because there is a Private Key Generator (PKG) service that distributes the required secret keys to participants depending on their identity.</p>
<p>As it turns out, the League of Entropy is basically acting as a <strong>“Distributed PKG” network</strong> because they’re using the BLS scheme to sign messages and, (as already denoted in the initial 2001 IBE paper), the decryption keys of their IBE scheme can be used as signatures over a given identity, which is exactly what the BLS scheme is accomplishing.</p>
<p>Moreover, it uses <strong>the round number as the identity</strong>, <strong>and the corresponding signature becomes the private key to decrypt.</strong> In short:</p>
<p>Public key = <strong>round number</strong></p>
<p>Private key = <strong>signature over the round number</strong></p>
<p>Given this, the flow is as follows:</p>
<ul>
<li>Anyone can encrypt a message towards a specific round X in advance</li>
<li>When the time has come, the network will generate the BLS signature (i.e. the <em>private key)</em> and release it publicly</li>
<li>Anybody can retrieve the BLS signature of the beacon produced at round X and decrypt any message that was encrypted towards that round X.</li>
</ul>
<p>For more technical information about how this works, you can <strong>check our pre-print paper</strong> about our Timelock Encryption scheme on ePrint <a href="https://eprint.iacr.org/2023/189" target="_blank" rel="noopener noreferrer"><strong>here</strong></a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-encryption"><strong>Hybrid Encryption</strong><a href="#hybrid-encryption" class="hash-link" aria-label="Direct link to hybrid-encryption" title="Direct link to hybrid-encryption">​</a></h2>
<p>Because our timed release encryption scheme allows users to <strong>encrypt a fixed sized message</strong>, and also to achieve better performance in general, it relies on “<strong>Hybrid encryption</strong>” to encrypt arbitrary data more easily. Hybrid encryption means that we are using an asymmetric encryption scheme to <strong>encrypt a Data Encryption Key (DEK)</strong> used to subsequently encrypt the actual data we want to transmit with a symmetric encryption scheme. This is commonly known as “wrapping a key”, and it&#x27;s how modern public key encryption schemes function to encrypt more data than their “block size”. It has the benefit of being much faster than doing asymmetric encryption of each chunk of data. Typically, the DEK is an AES or ChaCha key, both being blazingly fast symmetric encryption schemes compared to the public key scheme used to encrypt the DEK.</p>
<p>Hybrid encryption also allows users to significantly reduce the size of a ciphertext meant for multiple recipients, since one only needs to wrap the DEK for different recipients while the bulk of the encrypted data remains the same for all recipients since it was encrypted with a single symmetric key.</p>
<p>In practice, we decided the easiest way to implement this was to rely on the existing <a href="https://github.com/FiloSottile/age" target="_blank" rel="noopener noreferrer"><strong><code>age</code></strong></a> library and tool to create new types of “recipients” and “identities” for it using our timelock scheme to wrap symmetric encryption keys. This is made easier with <code>age</code> through the notion of “stanzas”, data itself is encrypted using a <code>filekey</code> which is then encrypted (wrapped) using one or multiple stanzas following the battle-tested hybrid encryption technique.</p>
<p>We tried to stay pretty close to the age-plugin format in order to possibly adapt this new scheme into a plugin, perhaps sometime in the future. Here is our custom tlock stanza:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> tlock </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">roundnumber</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">chainhash</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">timelocked</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">fileKey</span><span class="token operator" style="color:#393A34">-</span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">given</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">roundnumber</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">and</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">chainhash</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tlock"><strong>tlock</strong><a href="#tlock" class="hash-link" aria-label="Direct link to tlock" title="Direct link to tlock">​</a></h2>
<p>We have implemented the scheme in a <strong>Golang library</strong> <a href="https://github.com/drand/tlock" target="_blank" rel="noopener noreferrer"><strong>tlock</strong></a> and a <strong>Typescript library</strong> <a href="https://github.com/drand/tlock-js" target="_blank" rel="noopener noreferrer"><strong>tlock-js</strong></a>.</p>
<p>For convenience, we have implemented:</p>
<ul>
<li><strong>a web demo</strong> at <a href="https://timevault.drand.love/" target="_blank" rel="noopener noreferrer"><strong>https://timevault.drand.love/</strong></a> using our tlock-js library</li>
<li><strong>a CLI utility</strong> <code>tle</code> that you can find on the <a href="https://github.com/drand/tlock#install-or-build-the-cli" target="_blank" rel="noopener noreferrer"><strong>tlock repo</strong></a></li>
</ul>
<p>The <code>tlock</code> Go library is a pure Go library implemented on top of an implementation of <a href="https://github.com/drand/kyber/tree/master/encrypt/ibe" target="_blank" rel="noopener noreferrer"><strong>IBE in our Kyber library</strong></a> fork and instantiated using <a href="https://github.com/kilic/bls12-381" target="_blank" rel="noopener noreferrer"><strong>kilic’s BLS12-381</strong></a> elliptic curve library. The <code>tle</code> CLI tool is built following the same kind of flags as used in <code>age</code> itself. Here’s a quick demo using it:</p>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/181501/177999855-cc1cfef7-ee1c-4193-bea7-4ee2e689f2d1.svg" alt="https://user-images.githubusercontent.com/181501/177999855-cc1cfef7-ee1c-4193-bea7-4ee2e689f2d1.svg" class="img_ev3q"></p>
<p>The <code>tlock-js</code> is a pure Typescript implementation of timed encryption using the drand network. Like the <code>tlock</code> Go library, it uses <a href="http://age-encryption.org/" target="_blank" rel="noopener noreferrer"><strong>Age encryption</strong></a> under the hood to perform symmetric encryption on a given payload using <a href="https://en.wikipedia.org/wiki/ChaCha20-Poly1305" target="_blank" rel="noopener noreferrer"><strong>chacha20-poly1305</strong></a> and wraps the symmetric key using timelock encryption. This ciphertext is then (optionally) encoded using ascii armor making it easy to move around and display - similar to what PGP and other utilities do.</p>
<p>The library only has a handful of dependencies:</p>
<ul>
<li>some of the noble crypto libraries (the de facto standard for many algorithms in js/ts)</li>
<li>Stablelib’s chacha20-poly1305 implementation</li>
<li>a polyfill for node’s <code>Buffer</code></li>
</ul>
<p>It’s available on npm at <a href="https://www.npmjs.com/package/tlock-js" target="_blank" rel="noopener noreferrer"><strong>https://www.npmjs.com/package/tlock-js</strong></a> and github at <a href="https://github.com/drand/tlock-js" target="_blank" rel="noopener noreferrer"><strong>https://github.com/drand/tlock-js</strong></a> and is used by our <a href="https://timevault.drand.love/" target="_blank" rel="noopener noreferrer"><strong>Timevault web demo</strong></a>!</p>
<p>Finally, to ensure the best security guarantees possible to our users, we had both <code>tlock</code> and <code>tlock-js</code> go through a code assessment by a renowned cybersecurity company, which we’ll be releasing shortly as well.</p>
<h1><strong>Our new <code>fastnet</code> network</strong></h1>
<p>The best part about our timelock solution is that it is live on our mainnet! You can try it in your browser here: <a href="https://timevault.drand.love/" target="_blank" rel="noopener noreferrer"><strong>https://timevault.drand.love/</strong></a></p>
<p>This is possible because the League of Entropy actually launched a new drand mainnet network, on March 1st, 2023: the <code>fastnet</code> 🏎️ network! It is readily available through our mainnet endpoints: <a href="https://api.drand.sh/dbd506d6ef76e5f386f41c651dcb808c5bcbd75471cc4eafa3f4df7ad4e4c493/info" target="_blank" rel="noopener noreferrer"><strong>https://api.drand.sh/dbd506d6ef76e5f386f41c651dcb808c5bcbd75471cc4eafa3f4df7ad4e4c493/info</strong></a></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;public_key&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;a0b862a7527fee3a731bcb59280ab6abd62d5c0b6ea03dc4ddf6612fdfc9d01f01c31542541771903475eb1ec6615f8d0df0b8b6dce385811d6dcf8cbefb8759e5e616a3dfd054c928940766d9a5b9db91e3b697e5d70a975181e007f87fca5e&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;period&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;genesis_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1677685200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;hash&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;dbd506d6ef76e5f386f41c651dcb808c5bcbd75471cc4eafa3f4df7ad4e4c493&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;groupHash&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;a81e9d63f614ccdb144b8ff79fbd4d5a2d22055c0bfe4ee9a8092003dab1c6c0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;schemeID&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;bls-unchained-on-g1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string-property property" style="color:#36acaa">&quot;metadata&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;beaconID&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;fastnet&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is running at a 3 second frequency, which is 10 times faster than our previous chained <code>default</code> mainnet network, and it uses G1 for signatures, which means its random beacons have signatures that are 50% smaller! It is also running in unchained mode, and thus enables timelock encryption on mainnet!</p>
<p>You can start building your very own sealed-bid auction system on top of it, <a href="https://research.kudelskisecurity.com/2023/02/22/releasing-a-timelocked-responsible-disclosure/" target="_blank" rel="noopener noreferrer"><strong>do a timelocked responsible disclosure</strong></a>, or use it as a <a href="https://gwern.net/self-decrypting#uses" target="_blank" rel="noopener noreferrer"><strong>deadman’s switch by encrypting your bitcoin private key</strong></a> with it and giving the timelocked ciphertext to your heirs, while having the full security of running on the League of Entropy mainnet instead of on our testnet, as was the case until now.</p>
<p>Expect another blog post in the coming months with more details about the G1/G2 swap in <code>fastnet</code>, and what it means for BLS signatures, and for the applications using drand beacons. (Hints: smaller footprint, better performance and, where applicable, much cheaper gas costs!)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-works"><strong>Related works</strong><a href="#related-works" class="hash-link" aria-label="Direct link to related-works" title="Direct link to related-works">​</a></h2>
<p>Our timelock work has already gathered significant interest from the community and we’re happy to report that there already exists:</p>
<ul>
<li>a <a href="https://github.com/timoth-y/tlock-rs" target="_blank" rel="noopener noreferrer"><strong>tlock-rs library</strong></a> prototype by <a href="https://twitter.com/timoethey" target="_blank" rel="noopener noreferrer"><strong>Timofey Luin</strong></a> supporting only the timelock part of our scheme without the hybrid encryption using age and not compatible with our <code>tle</code> tool. Timofey then used it to benchmark arithmetic circuits doing <a href="https://github.com/timoftime/zk-timelock" target="_blank" rel="noopener noreferrer"><strong>verifiable timelock encryption</strong></a> with Arkworks, cool stuff!</li>
<li>the <a href="https://github.com/thibmeu/tlock-rs" target="_blank" rel="noopener noreferrer"><strong>tlock_age library</strong></a> by <a href="https://twitter.com/thibmeu" target="_blank" rel="noopener noreferrer"><strong>Thibault Meunier</strong></a>, which started as a fork of the tlock-rs library adding age support to it and making it compatible with the age-based scheme implemented in our <code>tlock</code> and <code>tlock-js</code> libraries as well as in our <code>tle</code> tool. Thibault also changed the API significantly and is looking at migrating to a much faster Rust BLS12-381 implementation. If you’re looking at using timelock in Rust, search no more!</li>
<li>a <a href="https://github.com/thibmeu/drand-rs" target="_blank" rel="noopener noreferrer"><strong>CLI tool in Rust</strong></a>, called <code>dee</code>, also by <a href="https://twitter.com/thibmeu" target="_blank" rel="noopener noreferrer"><strong>Thibault</strong></a>, that uses his library in order to be compatible with <code>tle</code> but that also has cool drand-related features to get verifiable, public randomness. It also has a different set of flags.</li>
</ul>
<p>We are also aware of a few blockchain ecosystems that are currently looking into building on top of the BLS signatures emitted by the League of Entropy in order to achieve their own timed release encryption scheme. Stay tuned for more timelock-related news in the coming months!</p>
<p>Finally, don’t hesitate to <a href="https://join.slack.com/t/drandworkspace/shared_invite/zt-19u4rf6if-bf7lxIvF2zYn4~TrBwfkiA" target="_blank" rel="noopener noreferrer"><strong>join our drand Slack Workspace</strong></a> to discuss timelock encryption, or share with us your cool use cases for it, or follow us on our <a href="https://twitter.com/drand_loe" target="_blank" rel="noopener noreferrer"><strong>newly created @drand_loe Twitter account</strong></a> to stay tuned with the latest news from the drand team. Until next time!</p>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="conferences and events tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/conferences-and-events">Conferences-and-Events</a></li><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li><li class="tag_QGVx"><a title="news tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/news">News</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/drand-on-filecoin-virtual-machine-FVM-draffle">drand on Filecoin Virtual Machine (FVM) - draffle</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-15T00:00:00.000Z">March 15, 2023</time> · <!-- -->12 min read</div></header><div class="markdown"><p>To mark the launch of user-programmable smart contracts on the Filecoin Virtual Machine (FVM), the drand team is excited to release a three-part blog series on using randomness on the FVM! In this first part, we dive into the prevrandao EVM opcode (the FVM fully supports EVM bytecode!), a sample Solidity contract using it, a UI to interact with it, and some other necessary plumbing to make it all work.</p>
<p>If you want to skip all the wonderful learning, you can jump straight into the demo project we developed <a href="https://github.com/drand/draffle" target="_blank" rel="noopener noreferrer"><strong>on GitHub</strong></a> - the contract is deployed at address <code>0x9D38f3BB80D98cE09C3f0936Bea140181d4CCABA</code> on the Hyperspace testnet! A little familiarity with <a href="https://soliditylang.org/" target="_blank" rel="noopener noreferrer"><strong>Solidity</strong></a> will be helpful to follow along, but anyone familiar with a C-style language should be able to get the gist.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-randomness-on-the-blockchain-️">🎲 <strong>Randomness on the Blockchain</strong> ⛓️<a href="#-randomness-on-the-blockchain-️" class="hash-link" aria-label="Direct link to -randomness-on-the-blockchain-️" title="Direct link to -randomness-on-the-blockchain-️">​</a></h2>
<p>When developers think of randomness, we most often think of private randomness - for example, <a href="https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator" target="_blank" rel="noopener noreferrer"><strong>using a cryptographically secure pseudorandom number generator</strong></a> such as <a href="https://en.wikipedia.org/wiki//dev/random" target="_blank" rel="noopener noreferrer"><strong>/dev/random/</strong></a> to generate a private key. When executing a smart contract in a blockchain ecosystem, this poses a few challenges: Who provides the randomness? How do you know it&#x27;s random? If you interact with a smart contract, you can&#x27;t trust the author to generate randomness for you, as they may have a vested interest in the outcome. Similarly, you can&#x27;t trust miners to generate the randomness for you, as they too might have an interest in the outcome (or wish to collude with other participants).</p>
<hr>
<p>To be more concrete: <strong>Suppose I&#x27;m running a raffle via a smart contract</strong>, and users enter the draw by calling a function such as the following:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">address[] entrants;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function enter() external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrants.push(msg.sender);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Everybody who submits a transaction (and has it mined) has their address added to the list of entrants, which will be &quot;randomly&quot; drawn from. As the <em>totally unbiased</em> author of the smart contract, I&#x27;ve provided another function that allows me to draw the randomly chosen participant:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">event Winner(address theWinner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function draw(uint32 someTotallyRandomNumber) external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(author == msg.sender, &quot;Only the completely unbiased author can execute the draw winner!&quot;); // assuming we have set the `author` field in the constructor somewhere</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit Winner(entrants[someTotallyRandomNumber]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Of course, in blockchain-land, the state of the contract is public to everyone, and you as the author could simply register your own address as an entrant and pass in its index to win the raffle yourself!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-ethereum-increases-fairness"><strong>How Ethereum Increases Fairness</strong><a href="#how-ethereum-increases-fairness" class="hash-link" aria-label="Direct link to how-ethereum-increases-fairness" title="Direct link to how-ethereum-increases-fairness">​</a></h3>
<p>To address the challenges of randomness in smart contracts, the Ethereum community created <a href="https://github.com/randao/randao" target="_blank" rel="noopener noreferrer"><strong>RANDAO</strong></a>, a Decentralized Autonomous Organization (DAO) for providing randomness.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-randao-works"><strong>How RANDAO Works</strong><a href="#how-randao-works" class="hash-link" aria-label="Direct link to how-randao-works" title="Direct link to how-randao-works">​</a></h3>
<ol>
<li><strong>Contribution Phase</strong>:<!-- -->
<ul>
<li>In each block, 128 addresses from the network can contribute their piece of randomness.</li>
<li>Contributors send a small amount of ETH to the RANDAO contract along with a hash of their chosen random number.</li>
</ul>
</li>
<li><strong>Reveal Phase</strong>:<!-- -->
<ul>
<li>Six blocks later, contributors reveal their number.</li>
<li>Revealing the number earns them an ETH bounty.</li>
<li>Failing to reveal the number results in the loss of their deposited ETH.</li>
</ul>
</li>
<li><strong>Aggregation Phase</strong>:<!-- -->
<ul>
<li>Revealed numbers are combined to create a final random number.</li>
<li>This final random number is included in the block and is available to smart contracts in the next block using the prevrandao opcode.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advantages-over-single-author-randomness"><strong>Advantages Over Single-Author Randomness</strong><a href="#advantages-over-single-author-randomness" class="hash-link" aria-label="Direct link to advantages-over-single-author-randomness" title="Direct link to advantages-over-single-author-randomness">​</a></h3>
<ol>
<li><strong>Verifiability</strong>:<!-- -->
<ul>
<li>Users can inspect the RANDAO contract state and see all the inputs combined to create the final random number.</li>
<li>This transparency attests to the method of construction and ensures fairness.</li>
</ul>
</li>
<li><strong>Reduced Bias</strong>:<!-- -->
<ul>
<li>Instead of relying on a single <em>totally unbiased</em> author, up to 128 parties are involved in creating the randomness.</li>
<li>This makes it much harder to influence the output, raising the bar for any potential bias.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-challenges-and-limitations">⛔ <strong>Challenges and Limitations</strong><a href="#-challenges-and-limitations" class="hash-link" aria-label="Direct link to -challenges-and-limitations" title="Direct link to -challenges-and-limitations">​</a></h3>
<p>While RANDAO improves fairness, it is not entirely immune to manipulation. One such challenge is the &#x27;last mover&#x27;s advantage&#x27;:</p>
<ul>
<li><strong>Commit/Reveal Scheme</strong>: Participants commit to a random number ahead of time by providing the corresponding (SHA-3) hash. Later, they can choose to reveal or not reveal that number.</li>
<li><strong>Last Mover&#x27;s Advantage</strong>: The last participant to reveal their number can choose to reveal or not reveal it based on the desired outcome, thereby biasing the final output.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="illustrating-last-movers-advantage"><strong>Illustrating Last Mover&#x27;s Advantage</strong><a href="#illustrating-last-movers-advantage" class="hash-link" aria-label="Direct link to illustrating-last-movers-advantage" title="Direct link to illustrating-last-movers-advantage">​</a></h3>
<p>Imagine a scenario with 10 slots where each participant decides a single bit of the output number:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Number | 1 | 1 | 0 | 1 | 0 | 0 | 0 | 1 | 0 | ? |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Slot   | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Suppose the committed number is <code>1</code>.</li>
<li>The last participant can influence the final bit by deciding whether to reveal or not reveal their number.</li>
<li>For example, if a coin-flipping smart contract uses the last bit to determine heads (1) or tails (0), the last participant can ensure a desired outcome by revealing or not revealing their number.</li>
</ul>
<p>In practice, the influence is probabilistic and not direct. However, larger players who can fill more of the &#x27;slots&#x27; in RANDAO can still exert undue influence.</p>
<p>By involving multiple parties and ensuring transparency, RANDAO significantly enhances the fairness and reliability of randomness in smart contracts, despite its limitations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="randao-on-fvm"><strong>RANDAO on FVM</strong><a href="#randao-on-fvm" class="hash-link" aria-label="Direct link to randao-on-fvm" title="Direct link to randao-on-fvm">​</a></h3>
<p>RANDAO on EVM is still great - the above is more an insight into some of the security assumptions around it, as a way of introducing FVM&#x27;s approach to RANDAO and contrasting it. As the FVM is EVM compatible (i.e., everything possible in EVM bytecode is also possible on the FVM), it must also provide a <code>prev_randao</code> opcode for use in smart contracts and compatibility purposes. Instead of bridging to Ethereum or running its own RANDAO (both of which could happen in the future), Filecoin already has its own source of randomness used for leader election: drand.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="refresher-of-how-drand-works"><strong>Refresher of how drand works</strong><a href="#refresher-of-how-drand-works" class="hash-link" aria-label="Direct link to refresher-of-how-drand-works" title="Direct link to refresher-of-how-drand-works">​</a></h3>
<ul>
<li><strong>Threshold Network</strong>: drand is a <a href="https://en.wikipedia.org/wiki/Threshold_cryptosystem" target="_blank" rel="noopener noreferrer"><strong>threshold network</strong></a> that provides publicly verifiable, unbiasable randomness. It exploits the fact that the hash of a signature is indistinguishable from randomness to people without the associated private key.</li>
<li><strong>Cooperative Action</strong>: A threshold network is a network of nodes that can cooperatively perform actions such as signing. Enough nodes need to work together (referred to as the &#x27;threshold&#x27;) to perform these actions.</li>
<li><strong>Shamir&#x27;s Secret Sharing</strong>: Using a form of <a href="https://en.wikipedia.org/wiki/Shamir%27s_secret_sharing" target="_blank" rel="noopener noreferrer"><strong>Shamir&#x27;s Secret Sharing</strong></a>, the network creates a cryptographic keypair that no single member of the group has the private key of. Instead, they each get a share of that private key and must aggregate a threshold number of signatures to create a full signature on behalf of the entire group.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-features-of-drand"><strong>Key Features of drand</strong><a href="#key-features-of-drand" class="hash-link" aria-label="Direct link to key-features-of-drand" title="Direct link to key-features-of-drand">​</a></h3>
<ul>
<li><strong>Unbiasable Randomness</strong>: Unlike RANDAO, nodes in drand cannot influence the final random output. Once the keypair is generated, all future random numbers are deterministically decided, but nobody can get them until they&#x27;ve received a threshold number of signatures for each number.</li>
<li><strong>Security Considerations</strong>: One drawback is that if a threshold number of nodes were compromised, all future random numbers could be derived.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drand-in-filecoin"><strong>drand in Filecoin</strong><a href="#drand-in-filecoin" class="hash-link" aria-label="Direct link to drand-in-filecoin" title="Direct link to drand-in-filecoin">​</a></h3>
<ul>
<li><strong>Inclusion in Blocks</strong>: In Filecoin, the drand randomness beacon for the current time is included in every block&#x27;s headers.</li>
<li><strong>Usage in Smart Contracts</strong>: When a contract calls the <code>prevrandao</code> opcode, the randomness from the previous block is provided to it. This offers a straightforward method of using randomness on-chain, though with some potential pitfalls to consider.</li>
</ul>
<hr>
<p>Okay - without further ado let&#x27;s jump into the web app and code!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-ui">The UI<a href="#the-ui" class="hash-link" aria-label="Direct link to The UI" title="Direct link to The UI">​</a></h2>
<p>When the user first opens the UI, they should see something like this:</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/start.bdca1319.png" src="/assets/images/start.bdca1319-5b6ec8b47e6a2be361d8b5ebd73a236f.png" width="2048" height="1042" class="img_ev3q"></p>
<p>On the left-hand side we see when the next draw is scheduled, the current block and any draws that have already happened. There’s also a button labelled ‘Enter the next draw’ that we can click to pay the entry fee via our Metamask wallet. When we click it, a popup from Metamask such as the following appears:</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/connect-wallet.083095e5.png" src="/assets/images/connect-wallet.083095e5-f1603df1091b63db423dd7e7245fe794.png" width="712" height="1394" class="img_ev3q"></p>
<p>Once we’ve confirmed the transaction, we’ve now entered the draw:</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/draw-accepted.2ff1aab6.png" src="/assets/images/draw-accepted.2ff1aab6-d1598b7ac9596149bffc8764498031e8.png" width="2048" height="1043" class="img_ev3q"></p>
<p>If you’re on hyperspace, we can wait up to 24 hours (the default) until the next draw is scheduled, and we will be able to trigger it (in the next section we’ll find how to reduce that to any time we want for easier testing). At the time of the draw, the right-hand side of the UI will have changed:</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/trigger-draw.4356efc5.png" src="/assets/images/trigger-draw.4356efc5-9cf48c8285526c36ea5093aec44344c0.png" width="2048" height="1049" class="img_ev3q"></p>
<p>At the draw block height, users will be able to compete to trigger the draw and receive a small payout. Once the draw has been triggered, a new one is scheduled:</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/draw-triggered.ac101ff4.png" src="/assets/images/draw-triggered.ac101ff4-f2804b448884e9c64783c4af3f3a0724.png" width="2048" height="1049" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-contract">The Contract<a href="#the-contract" class="hash-link" aria-label="Direct link to The Contract" title="Direct link to The Contract">​</a></h2>
<p>First off, in the <code>./contracts/</code> directory, we have a single file called <a href="https://drand.love/blog/2023/03/16/draffle/contracts/DRaffle.sol" target="_blank" rel="noopener noreferrer"><strong>DRaffle.sol</strong></a>. It contains the solidity code which will be run on FVM to manage all the entrants and payouts from the contest. Let&#x27;s take a look at its constructor and fields:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">solidityCopy code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint256 costPerDraw;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint256 drawCutoff;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint256 triggerReward;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint256 nextDrawBlockHeight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">address[] candidates;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">constructor(uint256 roundCutoff, uint256 cost, uint256 reward) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    costPerDraw = cost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    triggerReward = reward;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    drawCutoff = roundCutoff;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scheduleNext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>The first field set in the constructor enables the author of the contract to choose a <code>cost</code> of entry (in FIL). All entrants will pay it, and (nearly all of) the total pool for every draw will be paid out to the winning address.</li>
<li>The second field set is a <code>reward</code> for users who initiate the draw. As the contract runs on-chain, we can&#x27;t easily (in solidity anyway) schedule future draws automagically - we have to rely on somebody in the ecosystem submitting a transaction to trigger the draw. To incentivise that, we&#x27;ll provide a small FIL bounty to cover the transaction fee plus a little extra, so users will want to trigger the draw.</li>
<li>The final field set - <code>drawCutOff</code> - is the number of blocks in advance we wish to close entries for a given draw. Readers with a keen eye will have noticed in the explanation of the <code>prevrandao</code> instruction, that it returns the randomness from the <em>previous</em> block header, and not the current block. Entrants could therefore know the random number used for a draw in advance of the draw happening.<!-- -->
<ul>
<li><em>In follow-up blog posts, we&#x27;ll discuss how we can use more current randomness to avoid this pitfall, but for now let&#x27;s close draws a few blocks in advance to eliminate this possibility of gaming the draw.</em></li>
</ul>
</li>
<li>Finally the constructor calls the <code>scheduleNext</code> function which will set the <code>nextDrawBlockHeight</code> field, clear any candidates and emit some convenient events for the UI to consume. It&#x27;s implementation is as follows:</li>
</ul>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">solidityCopy code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function scheduleNext() internal {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    candidates = new address ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nextDrawBlockHeight = block.number + 2880;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    emit Scheduled(nextDrawBlockHeight);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this implementation a draw will happen once every 24 hours (Filecoin mines a block every 30 seconds, i.e. 2 per minute, 60 minutes per hour, 24 hours per day- 2 * 60 * 24 = 2880), but it can easily be configured to be more frequent.</p>
<p>Now to our function users will call to enter the draw:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">solidityCopy code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function enter() external payable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(msg.value == costPerDraw, &quot;you have passed too much or too little money to enter the lotto&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(block.number &lt; nextDrawBlockHeight - drawCutoff, &quot;It&#x27;s too close to the next draw to participate&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    candidates.push(msg.sender);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It&#x27;s quite simple: users must pass a token amount equal to the <code>costPerDraw</code> into the contract with their transaction (hence the <code>payable</code> keyword). If they correctly do that and it&#x27;s not too close to the draw (remembering our <code>prevrandao</code> limitation discussed above!), their address is added to the candidate list for the draw.</p>
<p>The final important function is the draw function itself:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">solidityCopy code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function draw() external payable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // first we ensure that users can&#x27;t trigger the draw too early</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // we let them draw late, because perhaps nobody could get a transaction mined for the exact block height!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(block.number &gt;= nextDrawBlockHeight, &quot;it&#x27;s too early to trigger the draw!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // if nobody entered the draw, and thus there is no money to pay out, we send an event that there was no winner and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // just schedule the next draw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint numberOfEntries = candidates.length;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (numberOfEntries == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit NoWinner(block.number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // if there are candidates for the draw, we use the `prevrandao` value from the block, and turn it into an index to choose the winner.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // note: using the modulo operation can result in an output bias - check this great blog post on the matter: &lt;https://research.kudelskisecurity.com/2020/07/28/the-definitive-guide-to-modulo-bias-and-how-to-avoid-it/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address winner = candidates[block.prevrandao % numberOfEntries];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 amount = numberOfEntries * costPerDraw - triggerReward;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // we pay out the chosen winner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        payable(winner).transfer(amount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // and also pay out the `triggerReward` to the address who triggered the draw successfully</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // a small point to note is that they won&#x27;t get paid out if there are no entrants...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // paying them out would require the contract to maintain its own balance of tokens to pay out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // raffles with no entries, so it&#x27;s been omitted for convenience, but it&#x27;s something to consider if you</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // decide to run your own raffle!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        payable(msg.sender).transfer(triggerReward);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // and emit an event to let any listeners know who won!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Winner(block.number, winner, amount);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // finally, regardless of whether there is a winner or not we want to schedule the next draw as we saw in the constructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scheduleNext();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>So that&#x27;s it for part 1 - how to run a raffle using drand on the FVM via solidity. The sample repository contains a lot more useful tooling for deploying your own smart contract to the <a href="https://hyperspace.yoga/" target="_blank" rel="noopener noreferrer"><strong>Hyperspace testnet</strong></a> or your own local <a href="https://trufflesuite.com/ganache/" target="_blank" rel="noopener noreferrer"><strong>ganache network</strong></a>. In our next post, we&#x27;ll discuss how to use more immediate randomness functionality specific to the FVM, stepping outside the bounds of EVM compatibility.</p>
<p>Until then you can find the team on both the <a href="https://filecoin.io/slack" target="_blank" rel="noopener noreferrer"><strong>Filecoin slack</strong></a> and our own <a href="https://join.slack.com/t/drandworkspace/shared_invite/zt-19u4rf6if-bf7lxIvF2zYn4~TrBwfkiA" target="_blank" rel="noopener noreferrer"><strong>drand slack</strong></a> should you have any questions. Enjoy deploying cool projects to the FVM, and let us know how you&#x27;ve been using the FVM and randomness!</p>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="fvm tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/fvm">FVM</a></li><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li><li class="tag_QGVx"><a title="how to tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/how-to">How-to</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/a-guide-on-how-to-use-drand">A Guide on how to use drand</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-21T00:00:00.000Z">February 21, 2023</time> · <!-- -->5 min read</div></header><div class="markdown"><p>In this blog post, we’ll dive into the fascinating world of public randomness and provide a step-by-step tutorial on how to consume randomness from drand and use it in your applications. Get ready for an exciting journey into the heart of randomness!</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-public-randomness">Why Public Randomness?<a href="#why-public-randomness" class="hash-link" aria-label="Direct link to Why Public Randomness?" title="Direct link to Why Public Randomness?">​</a></h3>
<p>Most developers are familiar with private randomness: we use randomness to generate keypairs, randomize back off timings in distributed systems, choose stats for games, and a plethora of other things. This makes sense—if the randomness used to generate our keypairs was public, bad actors could intercept all our communications or steal our bitcoin!</p>
<p>However, some applications that currently use private randomness might be better served using public randomness. For example, online casinos generate random numbers to order cards dealt or determine a winner. We must trust that these casinos use effective random number generators, but <a href="http://web.archive.org/web/20210615005520/http://www.lauradhamilton.com/random-lessons-online-poker-exploit" target="_blank" rel="noopener noreferrer">history has shown this is not always the case</a>. If they committed to a random number generated by a third party (or third parties), or used some kind of <em>verifiable randomness</em>, this could improve fairness and increase user trust.</p>
<p>For cases such as random distribution of welfare (e.g., <a href="https://en.wikipedia.org/wiki/Universal_basic_income" target="_blank" rel="noopener noreferrer">universal basic income</a> experiments), the government could use a third party such as an NGO to draw random numbers. However, this still constitutes a weak link, as a single third party <a href="https://en.wikipedia.org/wiki/Dual_EC_DRBG#Software_and_hardware_which_contained_the_possible_backdoor" target="_blank" rel="noopener noreferrer">could be unduly influenced</a> to bias the randomness.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enter-drand">Enter drand<a href="#enter-drand" class="hash-link" aria-label="Direct link to Enter drand" title="Direct link to Enter drand">​</a></h3>
<p>drand is built upon a <a href="https://en.wikipedia.org/wiki/Threshold_cryptosystem" target="_blank" rel="noopener noreferrer">threshold network</a>. Instead of relying on a single third party, multiple third parties work together to generate a random number. It exploits the fact that a hashed signature has all the properties of randomness as long as nobody holds the secret key. Due to the way drand <a href="https://evervault.com/blog/shamir-secret-sharing" target="_blank" rel="noopener noreferrer">distributes keys</a>, no party ever has the whole secret key, and as such no one can ever predict the signature generated—woohoo, randomness! These properties are why projects such as <a href="https://socialincome.org/" target="_blank" rel="noopener noreferrer">Social Income</a> are building on top of drand for their randomness!</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-drand">Using drand<a href="#using-drand" class="hash-link" aria-label="Direct link to Using drand" title="Direct link to Using drand">​</a></h3>
<p>Presently, the drand network generates a random hex string every thirty seconds. It can be verified using the public key of the network, so you can receive randomness from an untrusted party and verify that it’s truly been created by the drand network. This powerful property simplifies your trust assumptions: you can receive randomness without having to trust the node that sent you the message because you can verify it for yourself.</p>
<p>In this tutorial, we&#x27;re going to fetch randomness using the <a href="https://github.com/drand/drand-client" target="_blank" rel="noopener noreferrer">official JavaScript client</a>, but you could also use the <a href="https://github.com/drand/drand/tree/master/client" target="_blank" rel="noopener noreferrer">official Go client</a>, one of the <a href="https://github.com/search?q=drand+rust" target="_blank" rel="noopener noreferrer">multiple unofficial Rust clients</a>, or fetch it via curl/libp2p/other channels and verify the BLS signatures yourself.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up">Setting Up<a href="#setting-up" class="hash-link" aria-label="Direct link to Setting Up" title="Direct link to Setting Up">​</a></h3>
<p>First, make sure you have a relatively recent version of Node.js (17+) and npm installed. Instructions can be found <a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Then, create a new folder for your project:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir drand-client-tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd drand-client-tutorial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install drand-client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As the drand client is bundled as an ESM module, add <code>&quot;type&quot;: &quot;module&quot;</code> in your <code>package.json</code> to use it.</p>
<p>Create a new file at the root of the project called <code>index.js</code> and open it in your editor of choice.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetching-randomness">Fetching Randomness<a href="#fetching-randomness" class="hash-link" aria-label="Direct link to Fetching Randomness" title="Direct link to Fetching Randomness">​</a></h3>
<p>The most basic primitive is a <code>Chain</code>—it represents a single network instance hosted by a node. Networks can have different parameters such as frequency, algorithm, and participants, but for our purposes, the default network is enough.</p>
<p>We&#x27;re going to connect to the HTTP API of the drand team’s nodes (<a href="https://api.drand.sh/" target="_blank" rel="noopener noreferrer">api.drand.sh</a>), but you could also use Cloudflare&#x27;s API endpoint (<a href="https://drand.cloudflare.com/" target="_blank" rel="noopener noreferrer">drand.cloudflare.com</a>), or StorSwift’s relay (<a href="https://api.drand.secureweb3.com:6875/" target="_blank" rel="noopener noreferrer">api.drand.secureweb3.com:6875</a>).</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">info</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run this with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node --experimental-fetch index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(Node versions greater than 18 can skip the <code>--experimental-fetch</code> flag!)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetching-the-latest-beacon">Fetching the Latest Beacon<a href="#fetching-the-latest-beacon" class="hash-link" aria-label="Direct link to Fetching the Latest Beacon" title="Direct link to Fetching the Latest Beacon">​</a></h3>
<p>To fetch the latest beacon, use the <code>fetchBeacon</code> function:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> fetchBeacon </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fetchBeacon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">beacon</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To get the latest beacon by time:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChainClient</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> fetchBeaconByTime </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChainClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fetchBeaconByTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">beacon</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For real-time applications, use the <code>watch</code> function to listen for new beacons:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChainClient</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> watch </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChainClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> beacons </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AbortController</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> beacon </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> beacons</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-randomness-effectively">Using Randomness Effectively<a href="#using-randomness-effectively" class="hash-link" aria-label="Direct link to Using Randomness Effectively" title="Direct link to Using Randomness Effectively">​</a></h3>
<p>If we only ever needed a 64-byte random value in our applications, we&#x27;d be finished now. Unfortunately, real-life applications often require more tailored randomness. Here’s how to handle different use cases:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coin-flip-example">Coin Flip Example<a href="#coin-flip-example" class="hash-link" aria-label="Direct link to Coin Flip Example" title="Direct link to Coin Flip Example">​</a></h3>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> fetchBeaconByTime </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fetchBeaconByTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">beacon</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> flip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> beacon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">randomness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">flip </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">round</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;: HEADS!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beacon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">round</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;: TAILS!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoiding-bias-in-random-selection">Avoiding Bias in Random Selection<a href="#avoiding-bias-in-random-selection" class="hash-link" aria-label="Direct link to Avoiding Bias in Random Selection" title="Direct link to Avoiding Bias in Random Selection">​</a></h3>
<p>For selecting a random winner from a lottery:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">HttpChain</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> fetchBeaconByTime </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;drand-client&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> participants </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;alice&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bob&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;carol&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dave&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;edward&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fiona&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;georgina&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpChain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;https://api.drand.sh&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">fetchBeaconByTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">chain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">beacon</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> randomNumber </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> beacon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">randomness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> winnerIndex </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> randomNumber </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">participants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Rejection sampling to avoid bias</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">winnerIndex </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">participants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    winnerIndex </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;0x&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">randomBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;hex&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token known-class-name class-name">BigInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">participants</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">The winner is </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">participants</span><span class="token template-string interpolation punctuation" style="color:#393A34">[</span><span class="token template-string interpolation">winnerIndex</span><span class="token template-string interpolation punctuation" style="color:#393A34">]</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up">Wrapping Up<a href="#wrapping-up" class="hash-link" aria-label="Direct link to Wrapping Up" title="Direct link to Wrapping Up">​</a></h3>
<p>Using drand can bring a new level of fairness and verifiability to your applications. Whether you’re flipping coins or selecting lottery winners, drand&#x27;s verifiable randomness ensures transparency and trust. We love hearing about the projects you’re working on, so feel free to <a href="https://join.slack.com/t/drandworkspace/shared_invite/zt-19u4rf6if-bf7lxIvF2zYn4~TrBwfkiA" target="_blank" rel="noopener noreferrer">join us on Slack</a> and share your stories or ask for help.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="suggested-readings">Suggested Readings:<a href="#suggested-readings" class="hash-link" aria-label="Direct link to Suggested Readings:" title="Direct link to Suggested Readings:">​</a></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Random_number" target="_blank" rel="noopener noreferrer">Random Number</a></li>
<li><a href="https://en.wikipedia.org/wiki/Threshold_cryptosystem" target="_blank" rel="noopener noreferrer">Threshold Cryptosystem</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator" target="_blank" rel="noopener noreferrer">Pseudorandom Number Generator</a></li>
<li><a href="https://en.wikipedia.org/wiki/Universal_basic_income" target="_blank" rel="noopener noreferrer">Universal Basic Income</a></li>
<li><a href="https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing" target="_blank" rel="noopener noreferrer">Shamir&#x27;s Secret Sharing</a></li>
<li><a href="https://en.wikipedia.org/wiki/Timing_attack" target="_blank" rel="noopener noreferrer">Timing Attack</a></li>
<li><a href="https://en.wikipedia.org/wiki/Dual_EC_DRBG" target="_blank" rel="noopener noreferrer">Dual_EC_DRBG</a></li>
</ul>
<hr>
<p>Until next time, happy coding! 🚀</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li><li class="tag_QGVx"><a title="how to tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/how-to">How-to</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/observing-randomness">Observing Randomness</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-08-25T00:00:00.000Z">August 25, 2022</time> · <!-- -->9 min read</div></header><div class="markdown"><p><em>Monitoring distributed systems is a challenge. While there are established patterns and solutions for monitoring the most common types of applications, there is usually no silver bullet. In this blog post, we outline the challenges that we faced when implementing monitoring for one such system, drand.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-drand">What is drand?<a href="#what-is-drand" class="hash-link" aria-label="Direct link to What is drand?" title="Direct link to What is drand?">​</a></h3>
<p><strong>Drand</strong> is a public, verifiable, unpredictable, and unbiased randomness beacon. It is based on the idea that to generate randomness in a reliable and trustworthy way, you cannot depend on a single entity to control the infrastructure where it runs. This led us to seek the collaboration of multiple organizations to run their own drand daemons, forming <a href="https://www.notion.so/The-League-of-Entropy-1e76674b75e249699445799c5083fe78?pvs=21" target="_blank" rel="noopener noreferrer">The League of Entropy</a> (LoE)—a distributed organization where each participating partner runs a drand node.</p>
<p>A drand <em>network</em> is composed of multiple <em>nodes</em>. Each network generates separate randomness beacons at specific intervals, called <em>rounds</em>. The number of nodes on a network is fixed at any given point in time and only changes during a <em>ceremony</em>. During the ceremony, a <em>threshold</em> is set, which is the minimum number of nodes that need to be connected to the network at any given time for randomness generation to succeed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-the-need-for-monitoring">📈 The Need for Monitoring<a href="#-the-need-for-monitoring" class="hash-link" aria-label="Direct link to 📈 The Need for Monitoring" title="Direct link to 📈 The Need for Monitoring">​</a></h3>
<p>To ensure security, we do not allow just any host to join the network at any time. Whenever a host joins or leaves the network, we hold a “ceremony” where cryptographic keys are refreshed and exchanged. In between ceremonies, the list of hosts that participate in a drand network is static. Ceremonies are usually held quarterly, and before each ceremony, an allow list containing the IP addresses of all nodes in the network is distributed to all participants to open the appropriate firewall ports.</p>
<p>Coordinating these ceremonies presents several challenges:</p>
<ul>
<li><strong>Synchronous Operation</strong>: All node operators need to be online simultaneously to execute commands correctly.</li>
<li><strong>Version Mismatch</strong>: Nodes might be running different versions of <code>drand</code>, leading to failures.</li>
<li><strong>Connectivity Issues</strong>: Nodes might have connectivity problems that prevent proper participation.</li>
</ul>
<p>To address these issues, full visibility into the drand network and the state of each node is essential. Our goal is to enable <a href="https://en.wikipedia.org/wiki/Asynchronous_system" target="_blank" rel="noopener noreferrer"><strong>asynchronous ceremonies</strong></a> where operators can execute commands within a timeframe without being online simultaneously. A monitoring tool providing an accurate view of nodes and network states is necessary.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-monitoring-architecture-requirements">📏 Monitoring Architecture Requirements<a href="#-monitoring-architecture-requirements" class="hash-link" aria-label="Direct link to 📏 Monitoring Architecture Requirements" title="Direct link to    📏 Monitoring Architecture Requirements">​</a></h3>
<p>To properly monitor the drand network, we have the following requirements:</p>
<ol>
<li><strong>Allow any LoE member to create their own monitoring infrastructure</strong>: Organizations can select the metrics aggregation platform that best meets their needs.</li>
<li><strong>Ease of deployment</strong>: Modify the drand binary to export metrics without adding a new binary.</li>
<li><strong>Minimize the need for opening network ports</strong>: Ideally, no network ports other than the one used for generating randomness should be opened.</li>
<li><strong>Use industry-standard formats where possible</strong>: Use an industry-standard format to publish metrics.</li>
<li><strong>Ability to see the state of the whole network from any point in the network</strong>: Enable each node to provide a full view of the whole network.</li>
<li><strong>(Close to) real-time view of the network state</strong>: Ensure changes in node state are seen quickly, especially during ceremonies.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-design-decisions">📐 Design Decisions<a href="#-design-decisions" class="hash-link" aria-label="Direct link to 📐 Design Decisions" title="Direct link to 📐 Design Decisions">​</a></h3>
<p>Our requirements led to the following design:</p>
<ul>
<li><strong>Each node exposes its own metrics in Prometheus format</strong>: Prometheus is an <a href="https://en.wikipedia.org/wiki/Prometheus_(software)" target="_blank" rel="noopener noreferrer"><strong>industry-standard</strong></a> format, and each node exposing its own metrics allows direct monitoring of individual nodes.</li>
<li><strong>Each node can retrieve other nodes’ metrics and expose them in Prometheus format</strong>: This enables not only Protocol Labs but any LoE member to create their own dashboards showing the state of the whole network.</li>
<li><strong>Metrics transport uses the same mechanism as inter-node communication for generating randomness (GRPC)</strong>: By using <a href="https://en.wikipedia.org/wiki/GRPC" target="_blank" rel="noopener noreferrer"><strong>GRPC</strong></a>, we allow metrics to be sent between nodes without requiring additional network ports.</li>
<li><strong>Gather metrics using Telegraf and export them to InfluxDB, accessed via Grafana Cloud</strong>: This setup centralizes metrics and creates an easy-to-use dashboard with a one-minute scraping interval, which can be lowered during ceremonies for faster updates.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-metrics-design">📊 Metrics Design<a href="#-metrics-design" class="hash-link" aria-label="Direct link to 📊 Metrics Design" title="Direct link to 📊 Metrics Design">​</a></h3>
<p>We decided to monitor the following minimal information for running a smooth ceremony:</p>
<ul>
<li>Version of <code>drand</code> that the node is running.</li>
<li>Whether nodes have restarted their daemon ahead of the ceremony to ensure that the certificate is still valid and to clear the process’ memory and storage.</li>
<li>Whether nodes have connectivity to all other nodes.</li>
<li>The current ceremony state of the node.</li>
</ul>
<p>For ongoing monitoring, we added the following for each beacon in each node:</p>
<ul>
<li>When the last randomness was generated.</li>
<li>The last round generated by the node for that beacon chain.</li>
<li>The time difference between nodes (including network round-trip times).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-inter-node-communications">📡 Inter-Node Communications<a href="#-inter-node-communications" class="hash-link" aria-label="Direct link to 📡 Inter-Node Communications" title="Direct link to 📡 Inter-Node Communications">​</a></h3>
<p>As mentioned above, one of the requirements was to be able to view the state of the whole drand network without requiring node operators to open any additional holes in their firewall, nor to connect to any hosts other than those included in the drand network itself. Therefore, it was necessary to enable the possibility of fetching a remote node’s metrics via the same method used to coordinate randomness generation: that is, through <a href="https://en.wikipedia.org/wiki/GRPC" target="_blank" rel="noopener noreferrer"><strong>GRPC</strong></a>.</p>
<p>We also wanted to reduce the amount of metrics traffic between nodes, so we went with a pull system where any node can pull any other node’s metrics when requested. For that, we exposed an additional HTTP endpoint that includes the peer’s ID to get Prometheus metrics for the associated peer. A request to that endpoint makes a GRPC call to the remote node to get the metrics before returning them to the client. With this, we have the ability to get metrics from all nodes in the drand network without any unnecessary additional traffic.</p>
<p>The Protocol Labs nodes all run instances of <a href="https://www.influxdata.com/time-series-platform/telegraf/" target="_blank" rel="noopener noreferrer"><strong>Telegraf</strong></a>, whose configuration is hard-coded to get the metrics from all nodes in the drand network. This is possible because the nodes in the network are static and only change during ceremonies. Telegraf then pushes the metrics into <a href="https://www.influxdata.com/" target="_blank" rel="noopener noreferrer"><strong>InfluxDB</strong></a>. We then use <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer"><strong>Grafana</strong></a> to visualize the data.</p>
<p>Regarding LoE members, the fact that metrics are exposed using the industry-standard Prometheus format and that any node can gather metrics from any other node in the network makes it possible for any of them to create a setup similar to this and gather metrics into their own observability solution.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-dashboard-design">📉 Dashboard Design<a href="#-dashboard-design" class="hash-link" aria-label="Direct link to 📉 Dashboard Design" title="Direct link to 📉 Dashboard Design">​</a></h3>
<p>As is usually the case, it took multiple iterations to get to a dashboard design that was useful and also comprehensible. These iterations involved both changing the layout and organization of the presented information, as well as adding metrics that were missed during initial analysis. For example, during ceremonies some of the state changes happen so fast that they were missed by the polling and dashboard refresh intervals, so we added timestamps to be able to see whether a state had changed or not. We also reformulated some metrics labels to reduce cardinality.</p>
<p>We ended up with a dashboard with two sections. The first section includes connectivity information for each node, as well as a connectivity matrix showing which nodes are connected to which other nodes. This has enabled us to find problems such as firewall misconfigurations or bugs impacting connectivity.</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/drand_dash_1.f1a0b363.png" src="/assets/images/drand_dash_1.f1a0b363-d91d74ddbe74f78ea8c2c3da60e99c2d.png" width="1175" height="887" class="img_ev3q"></p>
<p>The second section contains information about each of the beacons in the given network, including the ceremony state for each node. This allows us to track ceremonies, as well as ensuring that all nodes are up to date with all other nodes.</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/drand_dash_2.f887bda3.png" src="/assets/images/drand_dash_2.f887bda3-0f1d726e291be5d74b2fa9879db8b50a.png" width="1158" height="845" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-results">🏆 Results<a href="#-results" class="hash-link" aria-label="Direct link to 🏆 Results" title="Direct link to 🏆 Results">​</a></h3>
<p>We have already deployed and used the new dashboard in the last set of ceremonies that we carried out in our testnet network. It has proven to be an extremely useful tool. We were able to spot connectivity problems and other inconsistencies in a totally asynchronous manner, which in turn enabled us to resolve issues much faster. This has given us confidence to run the next testnet ceremony in an asynchronous manner, without having to coordinate all operators being in front of their keyboards at the same time.</p>
<p>Beyond ceremonies, we now have a much more detailed view of the state of the LoE drand network.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h3>
<p>As is the case with pretty much any software tool, many more features can be added and several of the existing ones can be optimized. However, what we have is already a big step forward and gives us much higher confidence in the process, compared to the ceremony procedure we used to have.</p>
<p>Some of the issues we have found that we would like to fix in future versions of the monitoring infrastructure are:</p>
<ul>
<li><strong>Consistency</strong>: We sometimes see some measurements toggling between two numbers in the dashboard. The reason for this is, we are gathering metrics from all hosts and storing them in Influx DB. However, some of these metrics are system-wide, and since this is a distributed system, some hosts might have slightly different views of the state of the network than other hosts (especially during ceremonies). While this is not a widespread problem, it can be confusing.</li>
<li><strong>Visibility of New Nodes</strong>: When a new node joins the network, we are unable to see</li>
</ul>
<p>it in the dashboard until the ceremony is finished. We would like to have some way of monitoring the state of a new node.</p>
<ul>
<li><strong>Visibility in the Case of Connectivity Problems</strong>: Since we are scraping the metrics from the Protocol Labs nodes, if a node cannot connect to any of them, we cannot gather its metrics. While this is mitigated by scraping from all Protocol Labs nodes instead of just one, we still run the risk of missing a node’s metrics if it cannot connect to any Protocol Labs nodes.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="suggested-references-for-further-reading">Suggested References for Further Reading:<a href="#suggested-references-for-further-reading" class="hash-link" aria-label="Direct link to Suggested References for Further Reading:" title="Direct link to Suggested References for Further Reading:">​</a></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Random_number" target="_blank" rel="noopener noreferrer">Random Number</a></li>
<li><a href="https://en.wikipedia.org/wiki/Threshold_cryptography" target="_blank" rel="noopener noreferrer">Threshold Cryptography</a></li>
<li><a href="https://en.wikipedia.org/wiki/Public_key_infrastructure" target="_blank" rel="noopener noreferrer">Public Key Infrastructure</a></li>
<li><a href="https://en.wikipedia.org/wiki/Verifiable_random_function" target="_blank" rel="noopener noreferrer">Verifiable Random Function</a></li>
<li><a href="https://en.wikipedia.org/wiki/Prometheus_(software)" target="_blank" rel="noopener noreferrer">Prometheus (software)</a></li>
<li><a href="https://en.wikipedia.org/wiki/GRPC" target="_blank" rel="noopener noreferrer">GRPC</a></li>
<li><a href="https://en.wikipedia.org/wiki/Asynchronous_system" target="_blank" rel="noopener noreferrer">Asynchronous System</a></li>
</ul>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/multi-frequency-support-&amp;-timelock-encryption-are-coming-to-drand">Multi-Frequency Support &amp; Timelock Encryption are coming to drand!</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-02-20T00:00:00.000Z">February 20, 2022</time> · <!-- -->6 min read</div></header><div class="markdown"><p>The drand team has been hard at work the last couple of months to develop and integrate new and extremely valuable features into the drand codebase! We have worked together with <a href="https://zondax.ch/" target="_blank" rel="noopener noreferrer"><strong>Zondax</strong></a>, a research and software development company, and we are extremely excited to announce the completion of a very important project for the future of drand. The project focused on two important features that have the potential to unlock new capabilities for the drand randomness service, enable new application scenarios and make drand able to support many more applications and platforms.</p>
<p>In summary, the new features include:</p>
<ul>
<li><strong>Unchained Randomness</strong>: Each randomness beacon in drand has so far been linked to the previous one, forming a chain of beacons. With this update, each beacon is now independent of (all) the previous one(s).</li>
<li><strong>Multi-protocol Support</strong>: Drand is now able to support multiple protocols running on the same physical node and the same binary. In other words, a node can now participate in multiple drand networks, each of which having different characteristics. These characteristics can be different frequency of emitting randomness, different thresholds, different participants or having randomness in chained or unchained mode.</li>
</ul>
<p><em>We have compiled a comprehensive list of 26 Q&amp;A in this <a href="https://docs.google.com/document/d/16QJG3Z-Kr0mN6snQz8cm0NnMXpYBpelKyvCf2oo1Zgc/edit?usp=sharing" target="_blank" rel="noopener noreferrer"><strong>FAQ document</strong></a>. Below we provide a base summary of the new features and we encourage you to refer to the document for further details.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-unchained-randomness--timed-encryption-">⛓️ <strong>Unchained Randomness &amp; Timed Encryption</strong> 🔐<a href="#️-unchained-randomness--timed-encryption-" class="hash-link" aria-label="Direct link to ️-unchained-randomness--timed-encryption-" title="Direct link to ️-unchained-randomness--timed-encryption-">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-this"><strong>What is this?</strong><a href="#what-is-this" class="hash-link" aria-label="Direct link to what-is-this" title="Direct link to what-is-this">​</a></h3>
<p>According to the original drand design and implementation, every new beacon is linked to the previous one, i.e., simplistically, every new beacon includes a link to the previous beacon, used to derive the new randomness. This creates a chain of randomness beacons from the current one to the genesis beacon, when the drand network was launched. With this upgrade, we provide the option of each beacon becoming independent of the previous one, or, in other words, randomness can be “unchained”. A new drand network can still run in “chained” mode, although we recommend using the “unchained” randomness version.</p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/chained.e448fb8e.jpg" src="/assets/images/chained.e448fb8e-ec61fa11fc4ee78c75f0dbf458351b5a.jpg" width="1600" height="571" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="https://drand.love/assets/img/unchained.726b44f8.jpg" src="/assets/images/unchained.726b44f8-9cdbe606996dae9667c6100e2d8d3232.jpg" width="1600" height="586" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-it-enable"><strong>What does it enable?</strong><a href="#what-does-it-enable" class="hash-link" aria-label="Direct link to what-does-it-enable" title="Direct link to what-does-it-enable">​</a></h3>
<p>Although chained randomness provides some nice properties, having each beacon independent of the previous one presents a lot of potential for some applications: drand consumers can now enable timelock encryption in their applications, which means that they can securely encrypt a message for a specific round in the future, which can then be decrypted by anyone with the corresponding randomness. This is a very important feature which can mitigate front-running attacks in Decentralized Exchanges, and oracle platforms, as well as enabling sealed bid auctions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-it-work"><strong>How does it work?</strong><a href="#how-does-it-work" class="hash-link" aria-label="Direct link to how-does-it-work" title="Direct link to how-does-it-work">​</a></h3>
<p>Both randomness generation and consumption procedures remain the same as previously. All members of a drand network, e.g., the LoE, need to contribute their part in order for Threshold Cryptography to work. As with the Multi-Frequency support feature, no security property of the protocol is compromised.</p>
<p>We will deliver this API in the coming months but we provide a sneak peek at how it can look like:</p>
<p>First, a client encrypts a message towards a round in the future.</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">ciphertext</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">EncryptToRound</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> round</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, once the associated randomness is created, <em>anybody</em> can decrypt the message:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// get the randomness associated with the round</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">random</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">Randomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">round</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access maybe-class-name" style="color:#d73a49">Decrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ciphertext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">random</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this feature, drand has the potential to solve problems that remain unsolved in the Web3.0 space, such as front-running attacks, and puts drand ahead of the competition!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-frequency--multi-protocol-support"><strong>Multi-Frequency &amp; Multi-Protocol Support</strong><a href="#multi-frequency--multi-protocol-support" class="hash-link" aria-label="Direct link to multi-frequency--multi-protocol-support" title="Direct link to multi-frequency--multi-protocol-support">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-this-1"><strong>What is this?</strong><a href="#what-is-this-1" class="hash-link" aria-label="Direct link to what-is-this-1" title="Direct link to what-is-this-1">​</a></h3>
<p>Drand is producing randomness every 30 seconds, by default, and this is how it has been programmed to operate ever since the network’s launch in August 2020 and up to the present day. However, several applications operate at higher frequencies (and quite likely some others at lower frequencies). We have heard the requests from our ecosystem of users and have worked hard to refactor the codebase and make drand capable of using different randomness schemes and/or frequencies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-it-enable-1"><strong>What does it enable?</strong><a href="#what-does-it-enable-1" class="hash-link" aria-label="Direct link to what-does-it-enable-1" title="Direct link to what-does-it-enable-1">​</a></h3>
<p>Multi-protocol support enables a single set of participants to generate multiple randomness beacons of different kinds and at different frequencies. For example, you could think of the LoE-operated network generating randomness at 3s as well as generating post quantum randomness every minute.</p>
<p>The full details of how the refactored protocol works will be made available in our documentation (once the features land in production), but, roughly, it works as follows.</p>
<p>In the next mainnet upgrade, LoE partners will start running a new protocol to generate <em>unchained</em> randomness at a higher frequency. The current protocol (chained randomness every 30s) will stay in place for the short term. The new base frequency is still to be determined, but let’s assume it is set to 3 seconds. Applications will now be able to consume randomness at any interval that is a multiple of the base frequency. So, for instance, Filecoin, which needs to consume randomness every 30 seconds, will be picking a beacon every 10th randomness generation event (once it starts following the new network). The case would be similar for an application that needs to consume randomness every, say, 6 seconds: the application would pick every other beacon generated by drand.</p>
<p>It is worth noting that all of the properties already natively integrated in drand, that is, verifiability, unpredictability and non-biasability, are kept intact with no compromise being made on the security properties of drand.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-it-work-1"><strong>How does it work?</strong><a href="#how-does-it-work-1" class="hash-link" aria-label="Direct link to how-does-it-work-1" title="Direct link to how-does-it-work-1">​</a></h3>
<p>With the updated setup different frequencies (realized as routines) are generated and live within the same process as separate protocols, although each protocol is completely isolated from each other. Applications that wish to consume randomness at some particular frequency can form a separate network. Nodes that join each network participate in randomness generation and propagation between them and make use of the corresponding protocol.</p>
<p><img decoding="async" loading="lazy" src="https://drand.love/assets/img/multi-frequency-diagram.cad03494.jpg" alt="https://drand.love/assets/img/multi-frequency-diagram.cad03494.jpg" class="img_ev3q"></p>
<p>More generally, each new frequency runs as a separate protocol. The new protocol can also choose between chained and unchained randomness. So, for instance, if we assume that the main drand network (the one operated by the LoE) runs at some specific frequency in unchained randomness mode, one can set up a new network with a different frequency and chained randomness.</p>
<p>It has to be highlighted that not all members of a drand network, e.g., the League of Entropy (LoE), have to participate in all frequency networks, but instead, networks can form with a subset of nodes.</p>
<p>This is another hugely valuable addition to drand’s features that make the service suitable for a large variety of applications and will expand drand’s customer base.</p>
<p>The updates have not been integrated into a release yet, but they’re both expected to land in the coming quarter. We hope that you’re as excited about these features as we are and we will be more than happy to discuss the needs of your particular application in order to take advantage of them. Feel free to reach out to us at: <a href="mailto:leagueofentropy@googlegroups.com" target="_blank" rel="noopener noreferrer"><strong>leagueofentropy@googlegroups.com</strong></a>, or through <a href="https://drand.love" target="_blank" rel="noopener noreferrer">drand’s website</a>. You can always follow developments in the public <a href="https://github.com/drand/drand/" target="_blank" rel="noopener noreferrer">GitHub repository</a>.</p>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="begginer tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/features">Features</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/home">Dev Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/drand" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/drandworkspace/shared_invite/zt-2p00bn43o-qALTK5RZEIK3I4fIO9h8dQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/drand/drand" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Apache 2.0 and/or MIT Licensed 2024 Randamu, Inc.™ Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>